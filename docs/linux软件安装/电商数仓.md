# 电商数仓

## 数据仓库概念

数据仓库的输入数据通常包括：业务数据、用户行为数据和爬虫数据等

+ 业务数据：就是各行业在处理事务过程中产生的数据
+ 用户行为数据：用户在使用产品过程中，通过埋点收集与客户端产品交互过程中产生的数据，并发往日志服务器进行保存
+ 爬虫数据：通常是通过技术手段获取其他公司网站的数据

![image-20230210173407739](img/image-20230210173407739-16760216493281.png)

数据分层架构：

![image-20230214122619808](img/image-20230214122619808.png)



## 系统架构

### 数据流转图

![image-20230216171854208](img/image-20230216171854208.png)

说明:

+ 数据采集
  + log数据：采用Flume+kafka的形式，Flume监听日志Log，发送给Kafka，另一端同样有Flume消费数据，同步到Kafka
  + db数据：采用全量同步和增量同步两种形式
    + 全量同步：DataX，每天同步全量数据到Hdfs
    + 增量同步：MaxWell，首次同步时，需要用布历史全部数据到Hdfs

### 技术版本-2022

+ Hadoop：3.1.3
+ Zookeeper：3.5.7
+ Mysql：5.7.16
+ Hive：3.1.2
+ Flume：1.9.0
+ Kafka：3.0.0
+ Spark：3.0.0
+ Datax：3.0.0
+ SuperSet：1.3.2
+ DplphinScheduler：2.0.3（该应用会比较吃内存）
+ MaxWell：1.29.2
+ Flink：1.13.0
+ Redis：6.0.8
+ Hbase：2.0.5
+ ClickHouse：20.4.5.36-2



## 离线数仓

### 技术选型

1. Flume，可以读取 log 日志，从文件中读取数据
2. kafka：大数据量传输
3. MaxWell：数据库追加数据导出
4. DataX：数据库全量数据复制，进行导入导出
5. Hadoop：大数据文件存储
6. Hive：HQL执行分布式计算
7. Spark：计算引擎
8. DolphinScheduler：调度器
9. Mysql：业务数据存储、报告数据存储
10. SuperSet：数据可视化工具



